/**
 * MarkerClustererPlus for Google Maps V3
 * @version 1.2.10 [December 8, 2020]
 * @author Gary Little
 * @copyright Copyright 2008 Google Inc.
 * @fileoverview
 * The library creates and manages per-zoom-level clusters for large amounts of markers.
 * <br/>
 * This is a v3 implementation of the
 * <a href="http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/"
 * >v2 MarkerClusterer</a>.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MarkerClusterer=e()}(this,function(){"use strict";function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function n(r,o,i){return(n=e()?Reflect.construct:function(e,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return r&&t(i,r.prototype),i}).apply(null,arguments)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i={sum:function(t,e){return t+e},average:function(t,e,n){return e/n}};function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var a=function(){function t(t,e){this.extend(t),this.setMap(e)}return t.prototype.extend=function(t){return Object.assign(this,t)},t}();function u(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function c(t,e){t.classList?t.classList.add(e):u(t,e)||(t.className+=" "+e)}function l(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}var h=function(e){function o(t){var n;return(n=e.call(this)||this).cluster_=t,n.className_="",n.styles_=[],n.center_=null,n.div_=null,n.sums_=null,n.visible_=!1,n.setMap(t.getMap()),n}return s(o,e),o.prototype.onAdd=function(){var t,e,n=this,o=this.cluster_.getMarkerClusterer(),i=google.maps.version.split(".");this.div_=document.createElement("div"),this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=(t=o.getExtendedBounds(n.getMap().getBounds())).getNorthEast().lat(),t.getSouthWest().lat()}),google.maps.event.addDomListener(this.div_,"mousedown",function(){var t=o.getZoomOnClick();o.setZoomOnClick(!1),setTimeout(function(){o.setZoomOnClick(t)},0)}),parseInt(i[0],10)>=3&&parseInt(i[1],10)>=6&&google.maps.event.addDomListener(this.div_,"click",function(){var t=o.getZoomOnClick();o.setZoomOnClick(!1),google.maps.event.trigger(n.cluster_,"click"),setTimeout(function(){o.setZoomOnClick(t)},0)})},o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},o.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},o.prototype.show=function(){if(this.div_&&this.center_){var t,e,n,r=this.cluster_.getMarkerClusterer(),o="",i=this.cluster_.getSize();if(r.getStyles().length>0){var s=r.getCalculator()(this.cluster_.getMarkers(),r.getStyles().length);this.sums_=s;var a=Math.max(0,s.index-1);a=Math.min(r.getStyles().length-1,a),this.styles_=r.getStyles()[a],this.className_=this.styles_.className||"",t=this.styles_.url,e=this.styles_.height,n=this.styles_.width,o=this.styles_.textColor||"black",this.styles_.textSize&&(this.div_.style.fontSize=this.styles_.textSize+"px"),this.styles_.textDecoration&&(this.div_.style.textDecoration=this.styles_.textDecoration)}this.div_.className="cluster "+this.className_,this.div_.innerHTML='<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"><span style="position: absolute;display: inline-block; top: 50%; left: 50%; transform: translate(-50%, -50%); color: '+o+';">'+i+"</span></div>",void 0===t||""===t?(this.div_.style.backgroundPosition="0 0",this.div_.style.width=n+"px",this.div_.style.height=e+"px"):(this.div_.style.backgroundImage='url("'+t+'")',this.div_.style.backgroundRepeat="no-repeat",this.div_.style.backgroundPosition="center",this.div_.style.backgroundSize=n+"px "+e+"px",this.div_.style.width=n+"px",this.div_.style.height=e+"px"),this.div_.style.display=""}this.visible_=!0},o.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.cluster_.getMarkerClusterer().getStyles().length-1,e),this.styles_=this.cluster_.getMarkerClusterer().getStyles()[e],this.className_=this.styles_.className||"",this.show()},o.prototype.setCenter=function(t){this.center_=t},o.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},o}(google.maps.OverlayView),p=function(e){function o(t,n,o){var i;return void 0===o&&(o={}),(i=e.call(this)||this).options=o,i.markers_=[],i.clusters_=[],i.listeners_=[],i.activeMap_=null,i.ready_=!1,i.gridSize_=t||60,i.minClusterSize_=n||2,i.styles_=o.styles||[],i.className_=o.className||"",i.zoomOnClick_=void 0===o.zoomOnClick||o.zoomOnClick,i.averageCenter_=void 0!==o.averageCenter&&o.averageCenter,i.setupStyles_(),i.setupDefaultClusterClass_(),i.setMap(o.map||null),i.prevZoom_=i.getMap()&&i.getMap().getZoom()||0,i}s(o,e);var a=o.prototype;return a.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.prevZoom_=this.getMap().getZoom(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){var e=t.getMap(),n=e.minZoom||0,r=Math.min(e.maxZoom||100,e.mapTypes[e.getMapTypeId()].maxZoom),o=Math.min(Math.max(t.getMap().getZoom(),n),r);t.prevZoom_!=o&&(t.prevZoom_=o,t.resetViewport(!1))}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw()})]},a.onRemove=function(){for(var t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(var e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[];for(var n=0;n<this.listeners_.length;n++)google.maps.event.removeListener(this.listeners_[n]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},a.draw=function(){},a.setupStyles_=function(){if(!(this.styles_.length>0))for(var t=0;t<this.styles_.length;t++){var e=this.styles_[t];void 0===e.width&&(e.width=40),void 0===e.textColor&&(e.textColor="#000000"),void 0===e.textSize&&(e.textSize=11),void 0===e.textDecoration&&(e.textDecoration="none"),void 0===e.className&&(e.className="")}},a.setupDefaultClusterClass_=function(){this.defaultClusterClass=function(){function t(t){e.call(this,t)}return s(t,e),t}()},a.fitMapToMarkers=function(){for(var t=this.getMarkers(),e=new google.maps.LatLngBounds,n=0;n<t.length;n++)!t[n].getPosition()||t[n].getMap()&&t[n].getMap()!==this.getMap()||e.extend(t[n].getPosition());this.getMap().fitBounds(e)},a.getGridSize=function(){return this.gridSize_},a.setGridSize=function(t){this.gridSize_=t},a.getMinimumClusterSize=function(){return this.minClusterSize_},a.setMinimumClusterSize=function(t){this.minClusterSize_=t},a.getMaxZoom=function(){return this.maxZoom_},a.setMaxZoom=function(t){this.maxZoom_=t},a.getClassName=function(){return this.className_},a.setClassName=function(t){this.className_=t},a.getStyles=function(){return this.styles_},a.setStyles=function(t){this.styles_=t},a.getZoomOnClick=function(){return this.zoomOnClick_},a.setZoomOnClick=function(t){this.zoomOnClick_=t},a.getAverageCenter=function(){return this.averageCenter_},a.setAverageCenter=function(t){this.averageCenter_=t},a.getIgnoreHidden=function(){return this.ignoreHidden_},a.setIgnoreHidden=function(t){this.ignoreHidden_=t},a.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},a.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},a.getImageExtension=function(){return this.imageExtension_},a.setImageExtension=function(t){this.imageExtension_=t},a.getImagePath=function(){return this.imagePath_},a.setImagePath=function(t){this.imagePath_=t},a.getImageSizes=function(){return this.imageSizes_},a.setImageSizes=function(t){this.imageSizes_=t},a.getCalculator=function(){return this.calculator_},a.setCalculator=function(t){this.calculator_=t},a.setHideLabel=function(t){this.hideLabel_=t},a.getHideLabel=function(){return this.hideLabel_},a.getBatchSizeIE=function(){return this.batchSizeIE_},a.setBatchSizeIE=function(t){this.batchSizeIE_=t},a.getClusterClass=function(){return this.clusterClass_},a.setClusterClass=function(t){this.clusterClass_=t},a.getMarkers=function(){return this.markers_},a.getTotalMarkers=function(){return this.markers_.length},a.getClusters=function(){return this.clusters_},a.getTotalClusters=function(){return this.clusters_.length},a.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},a.addMarkers=function(t,e){for(var n=0;n<t.length;n++)this.pushMarkerTo_(t[n]);e||this.redraw()},a.pushMarkerTo_=function(t){var e=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",function(){e.ready_&&(t.isAdded=!1,e.repaint())}),t.isAdded=!1,this.markers_.push(t)},a.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},a.removeMarkers=function(t,e){for(var n=!1,r=0;r<t.length;r++){var o=this.removeMarker_(t[r]);n=n||o}return!e&&n&&this.repaint(),n},a.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n=0;n<this.markers_.length;n++)if(t===this.markers_[n]){e=n;break}return-1!==e&&(t.setMap(null),this.markers_.splice(e,1),!0)},a.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},a.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var e=0;e<t.length;e++)t[e].remove()},0)},a.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var i=e.fromLatLngToDivPixel(r);i.x-=this.gridSize_,i.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(i);return t.extend(s),t.extend(a),t},a.redraw=function(){this.createClusters_(0)},a.resetViewport=function(t){for(var e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.forEach(function(t){t.isAdded=!1,t.getMap()&&t.setMap(null)});var n=this.markers_;t&&(n=[]),(this.markers_=n).length>0&&this.redraw()},a.distanceBetweenPoints_=function(t,e){var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},a.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},a.addToClosestCluster_=function(t){for(var e=4e4,n=null,r=(t.getPosition(),0);r<this.clusters_.length;r++){var o=this.clusters_[r],i=o.getCenter();if(i){var s=this.distanceBetweenPoints_(i,t.getPosition());s<e&&(e=s,n=o)}}n&&n.isMarkerInClusterBounds(t)?n.addMarker(t):(o=new f(this)).addMarker(t),this.clusters_.push(o)},a.createClusters_=function(t){var e=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()),r=this.getExtendedBounds(n),o=Math.min(t+this.batchSize_,this.markers_.length),i=t;i<o;i++){var s=this.markers_[i];!s.isAdded&&this.isMarkerInBounds_(s,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&s.getVisible())&&this.addToClosestCluster_(s)}if(o<this.markers_.length)this.timerRefStatic=window.setTimeout(function(){e.createClusters_(o)},0);else{delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this);for(var a=0;a<this.clusters_.length;a++)this.clusters_[a].updateIcon()}}},a.extend=function(t,e){return function(t){for(var e,n=1;n<arguments.length;n++)if(e=arguments[n])for(var r in e)t[r]=e[r];return t}({},t,e)},o}(google.maps.OverlayView),f=function(){function t(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new h(this,t.getStyles())}var e=t.prototype;return e.getSize=function(){return this.markers_.length},e.getMarkers=function(){return this.markers_},e.getCenter=function(){return this.center_},e.getMap=function(){return this.map_},e.getMarkerClusterer=function(){return this.markerClusterer_},e.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center_,this.center_),e=this.getMarkers(),n=0;n<e.length;n++)t.extend(e[n].getPosition());return t},e.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},e.addMarker=function(t){var e,n,r;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,i=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(i,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,r=this.markerClusterer_.getMaxZoom(),(null!==(e=this.map_.getZoom())&&void 0!==e?e:-1)>r)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(var a=0;a<n;a++)this.markers_[a].setMap(null);else t.setMap(null);return!0},e.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},e.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},e.updateIcon=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)for(var n=0;n<t;n++)this.markers_[n].setMap(this.map_);else if(t<this.minClusterSize_)this.clusterIcon_.hide();else{var r=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(o),this.clusterIcon_.show()}},e.isMarkerAlreadyAdded_=function(t){if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(var e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},t}();return p.prototype.calculator_=function(t,e){for(var n=0,r=t.length.toString(),o=0;o<t.length;o++)t[o].getVisible()&&n++;return{text:n.toString(),index:Math.min(e,Math.max(0,n))}},p.prototype.batchSize_=2e3,p.prototype.batchSizeIE_=500,p.prototype.clusterClass_="cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(p.prototype.batchSize_=p.prototype.batchSizeIE_),p.prototype.gridSize_=60,p.prototype.minClusterSize_=2,p.prototype.maxZoom_=null,p.prototype.styles_=[],p.prototype.className_="",p.prototype.imagePath_="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",p.prototype.imageExtension_="png",p.prototype.imageSizes_=[53,56,66,78,90],p.prototype.calculator_=function(t,e){for(var n=0,r=t.length,o=r.toString(),i=0;i<t.length;i++)t[i].getVisible()&&n++;return{text:n.toString(),index:Math.min(e,Math.max(0,n))}},p.prototype.batchSizeIE_=500,p.prototype.clusterClass_="cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(p.prototype.batchSize_=p.prototype.batchSizeIE_),p.prototype.extend=function(t,e){return function(t){for(var e,n=1;n<arguments.length;n++)if(e=arguments[n])for(var r in e)t[r]=e[r];return t}({},t,e)},p});
//# sourceMappingURL=markerclustererplus.min.js.map
