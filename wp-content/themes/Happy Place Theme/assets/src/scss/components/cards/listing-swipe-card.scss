// ===================================================================
// Listing Swipe Card - Design Standard for All Components
// This component defines the visual and interaction patterns
// that all other components should follow
// ===================================================================

.listing-swipe-card {
    // Base structure following design standard
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: var(--listing-swipe-card-width);
    background: var(--color-surface);
    border: var(--card-border);
    border-radius: var(--listing-swipe-card-border-radius);
    box-shadow: var(--listing-swipe-card-shadow);
    overflow: hidden;
    transition: all var(--listing-swipe-card-transition);
    
    // ===================================================================
    // Hover & Focus States (Design Standard Pattern)
    // ===================================================================
    &:hover {
        transform: var(--transform-hover-translate);
        box-shadow: var(--listing-swipe-card-shadow-hover);
        border-color: var(--hph-primary-200);
    }
    
    &:focus-within {
        outline: none;
        box-shadow: var(--card-shadow-focus);
    }
    
    // ===================================================================
    // Variant Classes (Consistent Naming Pattern)
    // ===================================================================
    &--featured {
        border: 2px solid var(--hph-primary-400);
        box-shadow: var(--card-shadow-hover);
        
        .card-image-container::before {
            content: 'Featured';
            position: absolute;
            top: var(--spacing-3);
            left: var(--spacing-3);
            z-index: var(--z-raised);
            padding: var(--spacing-1) var(--spacing-3);
            background: var(--hph-primary-400);
            color: var(--color-white);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            border-radius: var(--button-border-radius);
        }
    }
    
    &--compact {
        --listing-swipe-card-padding: var(--card-padding-sm);
        --listing-swipe-card-image-height: 160px;
        max-width: 280px;
    }
    
    &--minimal {
        border: none;
        box-shadow: none;
        background: transparent;
        
        &:hover {
            transform: none;
            box-shadow: var(--card-shadow);
        }
    }
    
    // ===================================================================
    // Context Classes (Usage Context Styling)
    // ===================================================================
    &--context-search {
        max-width: none; // Full width in search results
    }
    
    &--context-related {
        max-width: 280px; // Smaller for related items
    }
    
    &--context-featured {
        max-width: 400px; // Larger for featured content
    }
    
    // ===================================================================
    // Image Container (Design Standard Pattern)
    // ===================================================================
    .card-image-container {
        position: relative;
        height: var(--listing-swipe-card-image-height);
        overflow: hidden;
        background: var(--color-gray-100);
        
        // Image carousel
        .card-image-carousel {
            position: relative;
            width: 100%;
            height: 100%;
            
            .card-image {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                opacity: 0;
                transition: opacity var(--transition-normal);
                
                &.active {
                    opacity: 1;
                }
                
                // Lazy loading support
                &.lazy {
                    background: var(--color-gray-200);
                    
                    &::before {
                        content: '';
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        width: 24px;
                        height: 24px;
                        margin: -12px 0 0 -12px;
                        border: 2px solid var(--color-gray-400);
                        border-top-color: var(--hph-primary-400);
                        border-radius: 50%;
                        animation: spin 1s linear infinite;
                    }
                }
            }
            
            // Carousel controls
            .carousel-controls {
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 var(--spacing-2);
                opacity: 0;
                transition: opacity var(--transition-fast);
                
                .carousel-prev,
                .carousel-next {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    width: 32px;
                    height: 32px;
                    background: rgb(255 255 255 / 90%);
                    border: none;
                    border-radius: 50%;
                    color: var(--color-gray-700);
                    font-size: var(--font-size-lg);
                    font-weight: var(--font-weight-bold);
                    cursor: pointer;
                    transition: all var(--transition-fast);
                    backdrop-filter: blur(4px);
                    
                    &:hover {
                        background: var(--color-white);
                        color: var(--hph-primary-400);
                        transform: scale(1.1);
                    }
                    
                    &:focus {
                        outline: none;
                        box-shadow: var(--card-shadow-focus);
                    }
                }
                
                .carousel-indicators {
                    position: absolute;
                    bottom: var(--spacing-2);
                    left: 50%;
                    transform: translateX(-50%);
                    display: flex;
                    gap: var(--spacing-1);
                    
                    .indicator {
                        width: 8px;
                        height: 8px;
                        background: rgb(255 255 255 / 50%);
                        border-radius: 50%;
                        cursor: pointer;
                        transition: all var(--transition-fast);
                        
                        &.active,
                        &:hover {
                            background: var(--color-white);
                        }
                    }
                }
            }
        }
        
        // Status badge (positioned element pattern)
        .status-badge {
            position: absolute;
            top: var(--spacing-3);
            right: var(--spacing-3);
            z-index: var(--z-raised);
            padding: var(--spacing-1) var(--spacing-3);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            border-radius: var(--button-border-radius);
            backdrop-filter: blur(4px);
            
            &--active {
                background: var(--status-active);
                color: var(--color-white);
            }
            
            &--pending {
                background: var(--status-pending);
                color: var(--color-white);
            }
            
            &--sold {
                background: var(--status-sold);
                color: var(--color-white);
            }
            
            &--coming-soon {
                background: var(--status-coming-soon);
                color: var(--color-white);
            }
        }
        
        // Favorite button
        .favorite-button {
            position: absolute;
            top: var(--spacing-3);
            left: var(--spacing-3);
            z-index: var(--z-raised);
            width: 32px;
            height: 32px;
            background: rgb(255 255 255 / 90%);
            border: none;
            border-radius: 50%;
            color: var(--color-gray-600);
            font-size: var(--font-size-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            backdrop-filter: blur(4px);
            
            &:hover {
                background: var(--color-white);
                color: var(--color-danger);
                transform: scale(1.1);
            }
            
            &--active {
                color: var(--color-danger);
                background: var(--color-white);
            }
            
            &:focus {
                outline: none;
                box-shadow: var(--card-shadow-focus);
            }
        }
    }
    
    // Show carousel controls on hover
    &:hover .carousel-controls {
        opacity: 1;
    }
    
    // ===================================================================
    // Card Content (Design Standard Layout)
    // ===================================================================
    .card-content {
        display: flex;
        flex-direction: column;
        flex: 1;
        padding: var(--listing-swipe-card-padding);
        gap: var(--listing-swipe-card-gap);
    }
    
    // Title and price (header section)
    .card-header {
        .card-title {
            margin: 0 0 var(--spacing-1) 0;
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            line-height: var(--line-height-tight);
            color: var(--color-heading);
            
            a {
                color: inherit;
                text-decoration: none;
                transition: color var(--transition-fast);
                
                &:hover {
                    color: var(--hph-primary-400);
                }
                
                &:focus {
                    outline: none;
                    color: var(--hph-primary-400);
                    text-decoration: underline;
                }
            }
        }
        
        .card-price {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--hph-primary-400);
            line-height: var(--line-height-tight);
        }
    }
    
    // Property features (standardized grid)
    .card-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
        gap: var(--spacing-3);
        padding: var(--spacing-3) 0;
        border-top: 1px solid var(--color-border-light);
        border-bottom: 1px solid var(--color-border-light);
        
        .feature-item {
            text-align: center;
            
            .feature-value {
                display: block;
                font-size: var(--font-size-lg);
                font-weight: var(--font-weight-semibold);
                color: var(--color-text);
                line-height: var(--line-height-tight);
            }
            
            .feature-label {
                display: block;
                font-size: var(--font-size-xs);
                color: var(--color-text-light);
                text-transform: uppercase;
                font-weight: var(--font-weight-medium);
                margin-top: var(--spacing-0-5);
            }
        }
    }
    
    // Agent info section
    .card-agent {
        display: flex;
        align-items: center;
        gap: var(--spacing-3);
        
        .agent-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--color-border-light);
        }
        
        .agent-info {
            flex: 1;
            min-width: 0; // Prevent overflow
            
            .agent-name {
                font-size: var(--font-size-sm);
                font-weight: var(--font-weight-medium);
                color: var(--color-text);
                margin: 0;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .agent-title {
                font-size: var(--font-size-xs);
                color: var(--color-text-light);
                margin: 0;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
    }
    
    // ===================================================================
    // Card Actions (Design Standard Button Pattern)
    // ===================================================================
    .card-actions {
        display: flex;
        gap: var(--spacing-2);
        padding-top: var(--spacing-2);
        border-top: 1px solid var(--color-border-light);
        
        .action-button {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-1);
            height: var(--button-height-sm);
            padding: 0 var(--button-padding-x-sm);
            font-size: var(--font-size-sm);
            font-weight: var(--button-font-weight);
            text-decoration: none;
            border: 1px solid var(--color-border);
            border-radius: var(--button-border-radius);
            background: var(--color-surface);
            color: var(--color-text);
            cursor: pointer;
            transition: all var(--transition-fast);
            
            &:hover {
                background: var(--color-background-alt);
                border-color: var(--hph-primary-400);
                color: var(--hph-primary-400);
                transform: translateY(-1px);
            }
            
            &:focus {
                outline: none;
                box-shadow: var(--card-shadow-focus);
            }
            
            &--primary {
                background: var(--hph-primary-400);
                border-color: var(--hph-primary-400);
                color: var(--color-white);
                
                &:hover {
                    background: var(--hph-primary-500);
                    border-color: var(--hph-primary-500);
                    color: var(--color-white);
                }
            }
            
            &--secondary {
                background: var(--color-background-alt);
                border-color: var(--color-border);
                color: var(--color-text);
                
                &:hover {
                    background: var(--color-white);
                    border-color: var(--hph-primary-400);
                    color: var(--hph-primary-400);
                }
            }
            
            // Icon support
            .icon {
                width: 16px;
                height: 16px;
                fill: currentcolor;
            }
        }
    }
    
    // ===================================================================
    // Responsive Behavior (Mobile-First)
    // ===================================================================
    @media (width <= 640px) {
        max-width: 100%;
        
        .card-content {
            padding: var(--card-padding-sm);
        }
        
        .card-features {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .card-actions {
            flex-direction: column;
            
            .action-button {
                flex: none;
            }
        }
    }
    
    // ===================================================================
    // Loading State
    // ===================================================================
    &--loading {
        pointer-events: none;
        
        .card-image-container {
            background: var(--color-gray-200);
            animation: pulse 2s ease-in-out infinite;
        }
        
        .card-content > * {
            background: var(--color-gray-200);
            color: transparent;
            border-radius: var(--button-border-radius);
            animation: pulse 2s ease-in-out infinite;
        }
    }
    
    // ===================================================================
    // Error State
    // ===================================================================
    &--error {
        border-color: var(--color-danger);
        background: var(--color-danger-light);
        
        .card-image-container {
            background: var(--color-danger-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-danger);
            font-size: var(--font-size-sm);
            
            &::before {
                content: 'Failed to load';
            }
        }
    }
}

// ===================================================================
// Component Variations Following Same Pattern
// ===================================================================

// Agent Card (follows listing swipe card pattern)
.agent-card {
    @extend .listing-swipe-card;
    
    --listing-swipe-card-width: var(--agent-card-width);
    --listing-swipe-card-image-height: 200px;
    
    .card-image-container .card-image {
        object-position: center top; // Better for headshots
    }
    
    .card-header .card-title {
        font-size: var(--font-size-xl);
    }
    
    .card-subtitle {
        font-size: var(--font-size-sm);
        color: var(--color-text-light);
        margin: var(--spacing-1) 0 0 0;
    }
    
    .card-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-2);
        padding: var(--spacing-3) 0;
        border-top: 1px solid var(--color-border-light);
        
        .stat-item {
            text-align: center;
            
            .stat-value {
                display: block;
                font-size: var(--font-size-lg);
                font-weight: var(--font-weight-semibold);
                color: var(--hph-primary-400);
            }
            
            .stat-label {
                font-size: var(--font-size-xs);
                color: var(--color-text-light);
                text-transform: uppercase;
                font-weight: var(--font-weight-medium);
            }
        }
    }
}

// Community Card (follows same pattern)
.community-card {
    @extend .listing-swipe-card;
    
    .card-features {
        grid-template-columns: repeat(2, 1fr);
    }
}

// ===================================================================
// Grid Layouts for Cards
// ===================================================================

.cards-grid {
    display: grid;
    gap: var(--grid-gap-md);
    
    // Auto-responsive grid
    &--auto {
        grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--grid-listing-min-width)), 1fr));
    }
    
    // Fixed responsive breakpoints
    &--responsive {
        grid-template-columns: 1fr;
        
        @media (width >= 640px) {
            grid-template-columns: repeat(2, 1fr);
        }
        
        @media (width >= 1024px) {
            grid-template-columns: repeat(3, 1fr);
        }
        
        @media (width >= 1280px) {
            grid-template-columns: repeat(4, 1fr);
        }
    }
    
    // Compact grid for smaller cards
    &--compact {
        gap: var(--grid-gap-sm);
        grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
    }
    
    // Spacious grid for featured content
    &--spacious {
        gap: var(--grid-gap-lg);
        grid-template-columns: repeat(auto-fit, minmax(min(100%, 400px), 1fr));
    }
}

// ===================================================================
// Animation Keyframes
// ===================================================================

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

// ===================================================================
// Utility Classes for Component Consistency
// ===================================================================

.card-fade-in {
    animation: slideIn 0.3s ease-out;
}

.card-stagger {
    animation: slideIn 0.3s ease-out;
    animation-delay: calc(0.1s * var(--stagger-index, 0));
}

// ===================================================================
// Print Styles
// ===================================================================

@media print {
    .listing-swipe-card {
        break-inside: avoid;
        box-shadow: none;
        border: 1px solid #ccc;
        
        .carousel-controls,
        .favorite-button,
        .card-actions {
            display: none;
        }
        
        .card-image-carousel .card-image:not(.active) {
            display: none;
        }
    }
}