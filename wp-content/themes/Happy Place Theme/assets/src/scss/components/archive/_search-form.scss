/**
 * Happy Place Theme - Archive Search Form Component
 * 
 * Comprehensive search form for listing archives
 */

.hph-search-form {
    @include card-base;
    padding: var(--hph-spacing-8);
    margin-bottom: var(--hph-spacing-8);
    
    .search-form-inner {
        max-width: none;
    }
    
    // Layout Variants
    &.layout-horizontal {
        .search-row {
            display: grid;
            grid-template-columns: 2fr 2fr 1fr 1fr auto;
            gap: var(--hph-spacing-4);
            align-items: end;
            
            @include respond-below('lg') {
                grid-template-columns: 1fr 1fr auto;
                
                .bathrooms-field {
                    grid-column: 1;
                    grid-row: 2;
                }
                
                .bedrooms-field {
                    grid-column: 2;
                    grid-row: 2;
                }
                
                .submit-field {
                    grid-column: 3;
                    grid-row: 1 / span 2;
                }
            }
            
            @include respond-below('md') {
                grid-template-columns: 1fr;
                gap: var(--hph-spacing-4);
                
                .search-field {
                    grid-column: 1;
                    grid-row: auto;
                }
            }
        }
    }
    
    &.layout-vertical {
        .search-column {
            display: flex;
            flex-direction: column;
            gap: var(--hph-spacing-6);
            
            .rooms-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: var(--hph-spacing-4);
            }
        }
    }
    
    &.layout-compact {
        padding: var(--hph-spacing-6);
        
        .compact-row {
            display: flex;
            gap: var(--hph-spacing-3);
            align-items: center;
            
            @include respond-below('md') {
                flex-direction: column;
                align-items: stretch;
            }
        }
        
        .location-field.compact {
            flex: 2;
            
            .location-input {
                padding: var(--hph-spacing-4);
                font-size: var(--hph-font-size-lg);
                border-radius: var(--hph-border-radius-xl);
            }
        }
        
        .quick-filters-field {
            flex: 1;
        }
    }
    
    // Form Fields
    .search-field {
        position: relative;
        
        .field-label {
            display: block;
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
            margin-bottom: var(--hph-spacing-2);
            font-size: var(--hph-font-size-sm);
            
            i {
                margin-right: var(--hph-spacing-2);
                color: var(--color-primary);
                width: 1rem;
                text-align: center;
            }
        }
        
        input,
        select {
            @include form-input;
        }
        
        // Price and Square Footage Inputs
        .price-inputs,
        .sqft-inputs {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: var(--hph-spacing-3);
            align-items: center;
            
            input {
                min-width: 0;
            }
            
            .price-separator,
            .sqft-separator {
                color: var(--color-text-muted);
                font-weight: var(--font-weight-medium);
                font-size: var(--hph-font-size-sm);
                white-space: nowrap;
            }
            
            @include respond-below('sm') {
                grid-template-columns: 1fr;
                gap: var(--hph-spacing-2);
                
                .price-separator,
                .sqft-separator {
                    display: none;
                }
            }
        }
    }
    
    // Submit Button
    .search-submit-btn {
        @include button-primary;
        padding: var(--hph-spacing-4) var(--hph-spacing-8);
        font-size: var(--hph-font-size-lg);
        font-weight: var(--font-weight-semibold);
        height: fit-content;
        
        .btn-text {
            @include respond-below('sm') {
                display: none;
            }
        }
        
        i {
            @include respond-above('sm') {
                margin-right: var(--hph-spacing-2);
            }
        }
    }
    
    // Advanced Toggle
    .advanced-search-toggle {
        text-align: center;
        margin: var(--hph-spacing-6) 0;
        
        .toggle-advanced-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--hph-spacing-2);
            padding: var(--hph-spacing-3) var(--hph-spacing-6);
            background: var(--color-surface);
            color: var(--color-text-light);
            border: 1px solid var(--color-border);
            border-radius: var(--hph-border-radius-xl);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: var(--transition-all);
            
            &:hover {
                background: var(--color-primary-light);
                color: var(--color-primary-dark);
                border-color: var(--color-primary);
            }
            
            .toggle-icon {
                transition: transform var(--transition-fast);
            }
            
            &.expanded .toggle-icon {
                transform: rotate(180deg);
            }
        }
    }
    
    .advanced-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--hph-spacing-4);
        padding-top: var(--hph-spacing-6);
        margin-top: var(--hph-spacing-6);
        border-top: 1px solid var(--color-border-light);
        
        @include respond-below('sm') {
            grid-template-columns: 1fr;
        }
    }
    
    // Quick Filters
    .quick-filter-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: var(--hph-spacing-2);
        
        .quick-filter-btn {
            padding: var(--hph-spacing-2) var(--hph-spacing-4);
            background: var(--color-surface);
            color: var(--color-text);
            border: 1px solid var(--color-border);
            border-radius: var(--hph-border-radius-xl);
            font-size: var(--hph-font-size-sm);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: var(--transition-all);
            
            &:hover,
            &.active {
                background: var(--color-primary);
                color: var(--color-white);
                border-color: var(--color-primary);
                transform: translateY(-1px);
            }
        }
    }
    
    // Form Footer
    .search-form-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: var(--hph-spacing-6);
        padding-top: var(--hph-spacing-6);
        border-top: 1px solid var(--color-border-light);
        
        @include respond-below('sm') {
            flex-direction: column;
            gap: var(--hph-spacing-4);
            text-align: center;
        }
        
        .results-info {
            font-size: var(--hph-font-size-sm);
            color: var(--color-text-muted);
            
            .results-count {
                font-weight: var(--font-weight-semibold);
                color: var(--color-primary);
            }
        }
        
        .clear-filters-btn,
        .save-search-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--hph-spacing-2);
            padding: var(--hph-spacing-2) var(--hph-spacing-4);
            background: none;
            color: var(--color-text-muted);
            border: none;
            border-radius: var(--hph-border-radius-lg);
            font-size: var(--hph-font-size-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            
            &:hover {
                background: var(--color-surface);
                color: var(--color-text);
            }
        }
    }
    
    // Loading State
    &.loading {
        opacity: 0.7;
        pointer-events: none;
        
        .search-submit-btn {
            position: relative;
            
            &::after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 1rem;
                height: 1rem;
                margin: -0.5rem 0 0 -0.5rem;
                border: 2px solid transparent;
                border-top-color: currentColor;
                border-radius: var(--hph-border-radius-full);
                animation: spin 1s linear infinite;
            }
            
            .btn-text,
            i {
                opacity: 0;
            }
        }
    }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
