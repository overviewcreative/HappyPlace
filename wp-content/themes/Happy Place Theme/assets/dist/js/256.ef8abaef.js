(self.webpackChunkhappy_place_theme=self.webpackChunkhappy_place_theme||[]).push([[256],{256:function(){!function(e){"use strict";class n{constructor(){this.init()}init(){this.bindEvents(),this.initMortgageCalculator(),this.initScheduleShowing(),this.initFavorites()}bindEvents(){e(document).on("submit","#property-inquiry-form",e=>{this.handleInquiryForm(e)}),e(document).on("submit","#schedule-showing-form",e=>{this.handleScheduleForm(e)}),e(document).on("click",".hph-contact-agent",e=>{this.handleContactAgent(e)}),e(document).on("input","#mortgage-calculator-form input",()=>{this.calculateMortgage()}),e(document).on("click",".hph-btn-share",e=>{this.handleShare(e)})}handleInquiryForm(n){n.preventDefault();const t=e(n.target),a=t.find('button[type="submit"]'),o=a.text();a.prop("disabled",!0).text("Sending...");const s={action:"hph_property_inquiry",nonce:hph_ajax.nonce,property_id:t.find('input[name="property_id"]').val(),name:t.find('input[name="inquiry_name"]').val(),email:t.find('input[name="inquiry_email"]').val(),phone:t.find('input[name="inquiry_phone"]').val(),message:t.find('textarea[name="inquiry_message"]').val(),tour_request:t.find('input[name="tour_request"]').is(":checked")};e.ajax({url:hph_ajax.ajax_url,type:"POST",data:s,success:e=>{e.success?(this.showSuccessMessage("Your inquiry has been sent successfully!"),t[0].reset()):this.showErrorMessage(e.data.message||"There was an error sending your inquiry.")},error:()=>{this.showErrorMessage("There was an error sending your inquiry. Please try again.")},complete:()=>{a.prop("disabled",!1).text(o)}})}handleScheduleForm(n){n.preventDefault();const t=e(n.target),a={action:"hph_schedule_showing",nonce:hph_ajax.nonce,property_id:t.find('input[name="property_id"]').val(),preferred_date:t.find('input[name="preferred_date"]').val(),preferred_time:t.find('select[name="preferred_time"]').val(),contact_method:t.find('select[name="contact_method"]').val(),notes:t.find('textarea[name="notes"]').val()};e.ajax({url:hph_ajax.ajax_url,type:"POST",data:a,success:e=>{e.success?(this.showSuccessMessage("Your showing has been scheduled successfully!"),this.closeModal()):this.showErrorMessage(e.data.message||"There was an error scheduling your showing.")},error:()=>{this.showErrorMessage("There was an error scheduling your showing. Please try again.")}})}handleContactAgent(n){n.preventDefault();const t=e(n.currentTarget),a=t.data("agent-id"),o=t.data("property-id");e("#agent-contact-modal").length?this.openAgentContactModal(a,o):window.location.href=t.attr("href")}initMortgageCalculator(){const n=e("#mortgage-calculator-form");if(!n.length)return;const t=e("#property-price").val();t&&(n.find('input[name="home_price"]').val(t),this.calculateMortgage())}calculateMortgage(){const n=e("#mortgage-calculator-form");if(!n.length)return;const t=parseFloat(n.find('input[name="home_price"]').val())||0,a=parseFloat(n.find('input[name="down_payment"]').val())||0,o=parseFloat(n.find('input[name="interest_rate"]').val())||0,s=parseFloat(n.find('input[name="loan_term"]').val())||30;if(t>0&&o>0){const e=t-a,n=o/100/12,i=12*s,r=e*(n*Math.pow(1+n,i))/(Math.pow(1+n,i)-1);this.displayMortgageResults(r,e,t)}}displayMortgageResults(n,t,a){const o=e(".hph-mortgage-result");if(!o.length)return;const s=`\n                <div class="hph-mortgage-summary">\n                    <div class="hph-mortgage-payment">\n                        <span class="hph-payment-label">Est. Monthly Payment</span>\n                        <span class="hph-payment-amount">$${n.toLocaleString("en-US",{maximumFractionDigits:0})}</span>\n                    </div>\n                    <div class="hph-mortgage-details">\n                        <div class="hph-detail-item">\n                            <span>Loan Amount:</span>\n                            <span>$${t.toLocaleString()}</span>\n                        </div>\n                        <div class="hph-detail-item">\n                            <span>Home Price:</span>\n                            <span>$${a.toLocaleString()}</span>\n                        </div>\n                    </div>\n                </div>\n            `;o.html(s)}initScheduleShowing(){e(document).on("click",".hph-btn-schedule",e=>{e.preventDefault(),this.openScheduleModal()})}openScheduleModal(){if(e("#schedule-showing-modal").length)return void e("#schedule-showing-modal").addClass("active");const n=`\n                <div class="hph-modal" id="schedule-showing-modal">\n                    <div class="hph-modal-content">\n                        <div class="hph-modal-header">\n                            <h3>Schedule a Showing</h3>\n                            <button class="hph-modal-close">&times;</button>\n                        </div>\n                        <form id="schedule-showing-form" class="hph-modal-body">\n                            <input type="hidden" name="property_id" value="${e('input[name="property_id"]').val()}">\n                            \n                            <div class="hph-form-group">\n                                <label for="preferred_date">Preferred Date</label>\n                                <input type="date" id="preferred_date" name="preferred_date" required>\n                            </div>\n                            \n                            <div class="hph-form-group">\n                                <label for="preferred_time">Preferred Time</label>\n                                <select id="preferred_time" name="preferred_time" required>\n                                    <option value="">Select a time</option>\n                                    <option value="9:00 AM">9:00 AM</option>\n                                    <option value="10:00 AM">10:00 AM</option>\n                                    <option value="11:00 AM">11:00 AM</option>\n                                    <option value="12:00 PM">12:00 PM</option>\n                                    <option value="1:00 PM">1:00 PM</option>\n                                    <option value="2:00 PM">2:00 PM</option>\n                                    <option value="3:00 PM">3:00 PM</option>\n                                    <option value="4:00 PM">4:00 PM</option>\n                                    <option value="5:00 PM">5:00 PM</option>\n                                </select>\n                            </div>\n                            \n                            <div class="hph-form-group">\n                                <label for="contact_method">Preferred Contact Method</label>\n                                <select id="contact_method" name="contact_method">\n                                    <option value="phone">Phone</option>\n                                    <option value="email">Email</option>\n                                    <option value="text">Text Message</option>\n                                </select>\n                            </div>\n                            \n                            <div class="hph-form-group">\n                                <label for="notes">Additional Notes</label>\n                                <textarea id="notes" name="notes" rows="3" placeholder="Any special requests or questions?"></textarea>\n                            </div>\n                            \n                            <button type="submit" class="hph-btn hph-btn-primary">Schedule Showing</button>\n                        </form>\n                    </div>\n                </div>\n            `;e("body").append(n),e("#schedule-showing-modal").addClass("active")}initFavorites(){e(document).on("click",".hph-btn-favorite",n=>{n.preventDefault();const t=e(n.currentTarget),a=t.data("id"),o=t.data("nonce");e.ajax({url:hph_ajax.ajax_url,type:"POST",data:{action:"hph_toggle_favorite",property_id:a,nonce:o},success:e=>{if(e.success){t.toggleClass("is-favorite");const e=t.find("i"),n=t.find("span");t.hasClass("is-favorite")?(e.removeClass("far").addClass("fas"),n.text("Saved")):(e.removeClass("fas").addClass("far"),n.text("Save"))}}})})}handleShare(e){e.preventDefault(),navigator.share?navigator.share({title:document.title,url:window.location.href}):navigator.clipboard.writeText(window.location.href).then(()=>{this.showSuccessMessage("Link copied to clipboard!")})}openAgentContactModal(e,n){console.log("Opening agent contact modal",{agentId:e,propertyId:n})}closeModal(){e(".hph-modal").removeClass("active")}showSuccessMessage(e){this.showMessage(e,"success")}showErrorMessage(e){this.showMessage(e,"error")}showMessage(n,t){const a=e(`\n                <div class="hph-message hph-message--${t}">\n                    <i class="fas fa-${"success"===t?"check-circle":"exclamation-circle"}"></i>\n                    ${n}\n                </div>\n            `);e("body").append(a),a.addClass("show"),setTimeout(()=>{a.removeClass("show"),setTimeout(()=>a.remove(),300)},3e3)}}e(document).ready(()=>{new n})}(jQuery)}}]);