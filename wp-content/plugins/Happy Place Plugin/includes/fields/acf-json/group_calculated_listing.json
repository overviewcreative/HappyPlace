{
    "key": "group_calculated_listing",
    "title": "Calculated Analytics & Mortgage Calculator",
    "fields": [
        {
            "key": "field_calculated_analytics_tab",
            "label": "📊 Calculated Analytics",
            "name": "",
            "type": "tab",
            "placement": "top",
            "endpoint": 0
        },
        {
            "key": "field_calculated_info_message",
            "label": "Auto-Calculated Values",
            "name": "",
            "type": "message",
            "message": "These values are automatically calculated based on other field data. They update whenever the source fields are modified.",
            "new_lines": "wpautop",
            "esc_html": 0
        },
        {
            "key": "field_down_payment_percent",
            "label": "Down Payment Percentage",
            "name": "estimated_down_payment",
            "type": "number",
            "instructions": "Down payment as percentage of purchase price",
            "required": 0,
            "wrapper": {
                "width": "25",
                "class": "",
                "id": ""
            },
            "default_value": 20,
            "min": 0,
            "max": 100,
            "step": 5,
            "append": "%"
        },
        {
            "key": "field_interest_rate",
            "label": "Interest Rate",
            "name": "estimated_interest_rate",
            "type": "number",
            "instructions": "Annual interest rate",
            "required": 0,
            "wrapper": {
                "width": "25",
                "class": "",
                "id": ""
            },
            "default_value": 6.5,
            "min": 3,
            "max": 15,
            "step": 0.125,
            "append": "%"
        },
        {
            "key": "field_loan_term",
            "label": "Loan Term",
            "name": "estimated_loan_term",
            "type": "select",
            "instructions": "Mortgage term in years",
            "required": 0,
            "wrapper": {
                "width": "25",
                "class": "",
                "id": ""
            },
            "choices": {
                "15": "15 years",
                "20": "20 years",
                "30": "30 years"
            },
            "default_value": "30",
            "ui": 1,
            "return_format": "value"
        },
        {
            "key": "field_pmi_rate",
            "label": "PMI Rate",
            "name": "estimated_pmi_rate",
            "type": "number",
            "instructions": "Private mortgage insurance rate (if down payment < 20%)",
            "required": 0,
            "wrapper": {
                "width": "25",
                "class": "",
                "id": ""
            },
            "default_value": 0.5,
            "min": 0,
            "max": 2,
            "step": 0.1,
            "append": "%"
        },
        {
            "key": "field_calculated_payments_section",
            "label": "Calculated Payment Breakdown",
            "name": "",
            "type": "message",
            "message": "The following payments are automatically calculated based on the parameters above:",
            "new_lines": "wpautop",
            "esc_html": 0
        },
        {
            "key": "field_down_payment_amount",
            "label": "Down Payment Amount",
            "name": "estimated_down_payment_amount",
            "type": "number",
            "instructions": "Calculated down payment in dollars",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_loan_amount",
            "label": "Loan Amount",
            "name": "estimated_loan_amount",
            "type": "number",
            "instructions": "Amount to be financed",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_monthly_principal_interest",
            "label": "Monthly P&I",
            "name": "estimated_monthly_payment",
            "type": "number",
            "instructions": "Principal and interest payment",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_monthly_pmi",
            "label": "Monthly PMI",
            "name": "estimated_pmi",
            "type": "number",
            "instructions": "Private mortgage insurance",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_monthly_taxes",
            "label": "Monthly Taxes",
            "name": "estimated_monthly_taxes",
            "type": "number",
            "instructions": "Monthly property taxes",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_monthly_insurance",
            "label": "Monthly Insurance",
            "name": "estimated_monthly_insurance",
            "type": "number",
            "instructions": "Monthly homeowners insurance",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_monthly_hoa",
            "label": "Monthly HOA",
            "name": "estimated_monthly_hoa",
            "type": "number",
            "instructions": "Monthly HOA fees",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_total_piti",
            "label": "Total PITI",
            "name": "piti_payment",
            "type": "number",
            "instructions": "Principal, Interest, Taxes, Insurance",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "25",
                "class": "hph-readonly-field hph-highlight-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_total_monthly_cost",
            "label": "Total Monthly Cost",
            "name": "total_monthly_cost",
            "type": "number",
            "instructions": "PITI + HOA + PMI + Other costs",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "50",
                "class": "hph-readonly-field hph-highlight-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_timeline_tab",
            "label": "📅 Timeline & Dates",
            "name": "",
            "type": "tab",
            "placement": "top",
            "endpoint": 0
        },
        {
            "key": "field_contract_date",
            "label": "Contract Date",
            "name": "contract_date",
            "type": "date_picker",
            "instructions": "Date the property went under contract",
            "required": 0,
            "wrapper": {
                "width": "33",
                "class": "",
                "id": ""
            },
            "display_format": "F j, Y",
            "return_format": "Y-m-d",
            "first_day": 0
        },
        {
            "key": "field_close_date",
            "label": "Close Date",
            "name": "close_date",
            "type": "date_picker",
            "instructions": "Date the property closed/sold",
            "required": 0,
            "wrapper": {
                "width": "33",
                "class": "",
                "id": ""
            },
            "display_format": "F j, Y",
            "return_format": "Y-m-d",
            "first_day": 0
        },
        {
            "key": "field_expected_close_date",
            "label": "Expected Close Date",
            "name": "expected_close_date",
            "type": "date_picker",
            "instructions": "Expected closing date for pending sales",
            "required": 0,
            "wrapper": {
                "width": "34",
                "class": "",
                "id": ""
            },
            "display_format": "F j, Y",
            "return_format": "Y-m-d",
            "first_day": 0,
            "conditional_logic": [
                [
                    {
                        "field": "field_status",
                        "operator": "==",
                        "value": "pending"
                    }
                ]
            ]
        },
        {
            "key": "field_key_milestone_dates",
            "label": "Key Milestone Dates",
            "name": "milestone_dates",
            "type": "group",
            "instructions": "Important dates in the transaction process",
            "required": 0,
            "sub_fields": [
                {
                    "key": "field_inspection_date",
                    "label": "Inspection Date",
                    "name": "inspection_date",
                    "type": "date_picker",
                    "wrapper": {"width": "25"},
                    "display_format": "M j, Y",
                    "return_format": "Y-m-d"
                },
                {
                    "key": "field_appraisal_date",
                    "label": "Appraisal Date", 
                    "name": "appraisal_date",
                    "type": "date_picker",
                    "wrapper": {"width": "25"},
                    "display_format": "M j, Y",
                    "return_format": "Y-m-d"
                },
                {
                    "key": "field_financing_deadline",
                    "label": "Financing Deadline",
                    "name": "financing_deadline",
                    "type": "date_picker",
                    "wrapper": {"width": "25"},
                    "display_format": "M j, Y",
                    "return_format": "Y-m-d"
                },
                {
                    "key": "field_contingency_deadline",
                    "label": "Contingency Deadline",
                    "name": "contingency_deadline",
                    "type": "date_picker",
                    "wrapper": {"width": "25"},
                    "display_format": "M j, Y",
                    "return_format": "Y-m-d"
                }
            ]
        },
        {
            "key": "field_sale_information",
            "label": "Sale Information",
            "name": "sale_information",
            "type": "group",
            "instructions": "Final sale details (for sold properties)",
            "required": 0,
            "conditional_logic": [
                [
                    {
                        "field": "field_status",
                        "operator": "==",
                        "value": "sold"
                    }
                ]
            ],
            "sub_fields": [
                {
                    "key": "field_final_sale_price",
                    "label": "Final Sale Price",
                    "name": "final_sale_price",
                    "type": "number",
                    "wrapper": {"width": "33"},
                    "min": 0,
                    "step": 1000,
                    "prepend": "$"
                },
                {
                    "key": "field_sale_price_vs_list",
                    "label": "Sale vs List Price",
                    "name": "sale_price_vs_list",
                    "type": "number",
                    "wrapper": {"width": "33"},
                    "readonly": 1,
                    "append": "%",
                    "step": 0.01
                },
                {
                    "key": "field_days_to_contract",
                    "label": "Days to Contract",
                    "name": "days_to_contract",
                    "type": "number",
                    "wrapper": {"width": "34"},
                    "readonly": 1,
                    "append": "days"
                }
            ]
        }
    ],
    "location": [
        [
            {
                "param": "post_type",
                "operator": "==",
                "value": "listing"
            }
        ]
    ],
    "menu_order": 6,
    "position": "normal",
    "style": "default",
    "label_placement": "top",
    "instruction_placement": "label",
    "active": true,
    "description": "Auto-calculated analytics, mortgage calculator, timeline tracking, and sale information.",
    "show_in_rest": true
}
           { "esc_html": 0}
        ,
        {
            "key": "field_price_per_sqft",
            "label": "Price per Square Foot",
            "name": "price_per_sqft",
            "type": "number",
            "instructions": "Calculated as Price ÷ Square Footage",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "33",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$",
            "append": "/sq ft",
            "step": 0.01
        },
        {
            "key": "field_price_per_living_sqft",
            "label": "Price per Living Sq Ft",
            "name": "price_per_living_sqft",
            "type": "number",
            "instructions": "Calculated as Price ÷ Living Area",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "33",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$",
            "append": "/sq ft",
            "step": 0.01
        },
        {
            "key": "field_property_tax_rate",
            "label": "Property Tax Rate",
            "name": "property_tax_rate",
            "type": "number",
            "instructions": "Calculated tax rate as percentage of home value",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "34",
                "class": "hph-readonly-field",
                "id": ""
            },
            "append": "%",
            "step": 0.01
        },
        {
            "key": "field_days_on_market",
            "label": "Days on Market",
            "name": "days_on_market",
            "type": "number",
            "instructions": "Calculated days between list date and current date (or contract date)",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "33",
                "class": "hph-readonly-field",
                "id": ""
            },
            "append": "days"
        },
        {
            "key": "field_price_reduction_total",
            "label": "Total Price Reduction",
            "name": "price_reduction_total",
            "type": "number",
            "instructions": "Total amount reduced from original price",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "33",
                "class": "hph-readonly-field",
                "id": ""
            },
            "prepend": "$"
        },
        {
            "key": "field_price_reduction_percentage",
            "label": "Price Reduction %",
            "name": "price_reduction_percentage",
            "type": "number",
            "instructions": "Percentage reduced from original price",
            "required": 0,
            "readonly": 1,
            "wrapper": {
                "width": "34",
                "class": "hph-readonly-field",
                "id": ""
            },
            "append": "%",
            "step": 0.01
        },
        {
            "key": "field_mortgage_calculator_tab",
            "label": "🏦 Mortgage Calculator",
            "name": "",
            "type": "tab",
            "placement": "top",
            "endpoint": 0
        },
        {
            "key": "field_mortgage_info_message",
            "label": "Mortgage Calculations",
            "name": "",
            "type": "message",
            "message": "Configure mortgage parameters to calculate estimated monthly payments. These are estimates for buyer information only.",
            "new_lines": "wpautop",
        }